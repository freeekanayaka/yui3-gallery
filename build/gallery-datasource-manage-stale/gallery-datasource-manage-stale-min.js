YUI.add("gallery-datasource-manage-stale",function(F){var D="ignoreStaleResponses",E="cancelStaleRequests",B="data",A="host",C="_defRequestFn";F.namespace("Plugin").DataSourceManageStale=F.Base.create("datasource-manage-stale",F.Plugin.Base,[],{_lastId:null,_transactions:null,_doBeforeData:function(G){if(!this._transactions[G.tId]||(this.get(D)&&G.tId!=this._lastId)){G.halt();}},_doBeforeDefRequestFn:function(G){if(this.get(E)){F.Object.each(this._transactions,function(H,I){if(H.abort){H.abort();delete this._transactions[I];delete F.DataSource.Local.transactions[I];}},this);}},_doAfterDefRequestFn:function(G){if(this.get(D)){this._lastId=G.tId;}this._transactions[G.tId]=F.DataSource.Local.transactions[G.tId];},initializer:function(){this._transactions={};this.doBefore(B,this._doBeforeData,this);this.doBefore(C,this._doBeforeDefRequestFn,this);this.doAfter(C,this._doAfterDefRequestFn,this);}},{NS:"stale",ATTRS:{cancelStaleRequests:{value:false},ignoreStaleResponses:{value:false}}});},"@VERSION@",{requires:["datasource-local"]});
YUI.add("gallery-ac-multidelimit",function(a){var i="host",g="queryDelimiter",f="value",h="valueChange",e="_parseValue",d="_updateValue",c="_onInputBlur",b=/\w+.*\s+.*\w+/;a.ACMultiQueryDelim=a.Base.create("ac-multidelim",a.Plugin.Base,[],{_beforeParseValue:function(j){return new a.Do.Prevent();},_findLastDelimiter:function(m,l){if(!a.Lang.isArray(l)){return l;}var j=0,k;a.Array.each(l,function(o){var n=m.lastIndexOf(o);if(n>j){j=n;k=o;}});return k;},_newParseValue:function(j){var k=this.get(i).get(g);j=j||"";k=this._findLastDelimiter(j,k);if(a.Lang.isString(k)){j=j.split(k);j=j[j.length-1];}return new a.Do.AlterReturn("",a.Lang.trimLeft(j));},_newUpdateValue:function(k){var m=this.get(i),n=m.get(g),l,j,o;k=a.Lang.trimLeft(k);if(n){if(a.Lang.isString(n)){l=a.Lang.trim(n);o=a.Array.map(a.Lang.trim(m.get(f)).split(n),a.Lang.trim);j=o.length;if(j>1){o[j-1]=k;k=o.join(l+" ");}k=k+l+" ";}else{if(a.Lang.isArray(n)){}}}m.set(f,k);return new a.Do.Prevent();},_newOnInputBlur:function(o){var q=this.get(i),k=q.get(g),m,n,l,p;function r(t,s){while((t=a.Lang.trimRight(t))&&(n=t.length-s.length)&&t.lastIndexOf(s)===n){t=t.substring(0,n);}return t;}function j(u,s){var t=r(l,a.Lang.trimRight(u));if(t==l){m[s]=true;}else{m[s]=false;}l=t;}if(k&&!q.get("allowTrailingDelimiter")){p=l=q._inputNode.get(f);if(k){if(a.Lang.isString(k)){k=a.Lang.trimRight(k);l=r(l,k);}else{if(a.Lang.isArray(k)){m=a.Array.map(k,function(){return false;});while(a.Array.indexOf(m,false)>-1){a.Array.each(k,j);}}}}else{l=a.Lang.trimRight(l);}if(l!==p){q.set(f,l);}}return new a.Do.Prevent();},_onValueChange:function(l){if(!l.newVal||(l.src&&l.src=="ui")){return;}var m=l.newVal,k=this.get(i),j;if(!l.noQuotes&&b.test(m)){m='"'+m+'"';}j=this.getCompletedStr(l.prevVal,m,k.get(g));if(j){l.newVal=j;}else{l.newVal=m;}},getCompletedStr:function(m,k,n){var l=this._findLastDelimiter(m,n),j;if(l){j=m.split(l);j.pop();j.push(k);return j.join(l);}},initializer:function(){this.doBefore(e,this._beforeParseValue);this.doAfter(e,this._newParseValue);this.doBefore(d,this._newUpdateValue);this.doBefore(c,this._newOnInputBlur);this.doBefore(h,this._onValueChange);}},{NS:"multiQueryDelim"});},"@VERSION@",{requires:["autocomplete-list","plugin","base-build"]});
YUI.add("gallery-model",function(B){B.Model=B.Base.create("model",B.Base,[],{_id:null,"string":function(D,C){return String(D);},"number":function(D,C){return Number(D);},"date":function(D,C){return new Date(D);},initializer:function(C){this.once("initializedChange",function(D){var F=this.constructor,E=this.get("_id");if(!F._instances){F._instances={};}F._instances[E]=this;},this);},destructor:function(){var D=this.constructor,C=this.get("_id");delete D._instances[C];},compare:function(C){if(!C instanceof this.constructor){return false;}var D=B.JSON.stringify(this.toObject()),E=B.JSON.stringify(C.toObject());return D==E;},toObject:function(){var E=this.constructor,C=E.members(),D={};B.Array.each(C,function(F){D[F]=this.get(F);},this);return D;}},{NS:"model",ATTRS:{primaryKey:{readOnly:true,valueFn:function(){return this.constructor.PRIMARY_KEY;}},"_id":{readOnly:true,getter:function(){var C=this.get("primaryKey"),D=(C?this.get(C):null);if(!D){if(!this._id){this._id=B.guid();}D=this._id;}return D;}}},getById:function(D){var C;if(this._instances){C=this._instances[D];}return C;},members:function(){var F=this.prototype.constructor,E=[];function C(H,G){if(!H.readOnly){E.push(G);}}while(F){try{if(F.ATTRS){B.Object.each(F.ATTRS,C);}}catch(D){}F=(F.superclass?F.superclass.constructor:null);}return E;}});function A(C){var D=C.superclass.constructor;while(D.superclass){if(D==B.Model){return true;}D=D.superclass.constructor;}return false;}B.mix(B.Base._buildCfg.custom,{getById:function(E,D,C){if(A(D)){D.getById=B.Model.getById;}},members:function(E,D,C){if(A(D)){D.members=B.Model.members;}}});B.namespace("Plugin").DataSourceModelMapper=B.Base.create("model-mapper",B.Plugin.Base,[],{_mapData:function(C){var D=this.get("map"),E=(D?{}:C);B.Object.each(D,function(F,I,H){var G=B.DataSchema.JSON.getPath(F);E[I]=B.DataSchema.JSON.getLocationValue(G,C);});return E;},_resultsToModels:function(D){var E=[],C=this.get("model");B.Array.each(D,function(H,I,G){var J=this._mapData(H),F=(C?new C(J):J);if(F){E.push(F);}},this);return E;},_beforeDefResponseFn:function(D){var C=D.response.results;if(C){D.response.results=this._resultsToModels(C);}else{D.response.results=[];}B.DataSource.Local.issueCallback(D,this.get("host"));return new B.Do.Halt("ModelManager plugin halted defResponseFn");},initializer:function(){this.doBefore("_defResponseFn",this._beforeDefResponseFn);}},{NS:"mapper",ATTRS:{map:{},model:{}}});},"@VERSION@",{requires:["base-build","datasource-local","dataschema-json","json-stringify","plugin"]});